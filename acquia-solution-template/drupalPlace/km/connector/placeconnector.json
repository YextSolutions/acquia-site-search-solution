{
  "$id": "drupalPlace_placeconnector",
  "$schema": "https://schema.yext.com/config/km/connector/v4",
  "displayName": "Drupal Place Connector",
  "entityTypes": [
    "location"
  ],
  "source": {
    "sourceConfig": {
      "nativeSourceConfig": {
        "source": "drupal",
        "operation": "fetchPlaceContent",
        "inputs": {
          "drupalDomain": "${{drupalDomain}}"
        }
      }
    },
    "selectors": [
      {
        "type": "JSON",
        "header": "ID"{
          "$id": "drupalPlace_placeconnector",
          "$schema": "https://schema.yext.com/config/km/connector/v4",
          "displayName": "Drupal Place Connector",
          "entityTypes": [
            "location"
          ],
          "source": {
            "sourceConfig": {
              "apiPullConfig": {
                "requestType": "GET",
                "url": "https://yextdemo.acsfpmm.acsitefactory.com/jsonapi/node/place",
                "paginationControl": {
                  "cursorPagination": {
                    "cursor": "links.next",
                    "cursorType": "FULL_URL",
                    "detectCursorInHeader": false
                  }
                },
                "headers": {
                  "Accept": "application/vnd.api+json",
                  "Content-Type": "application/vnd.api+json"
                },
                "queryParams": {
                  "per_page": "50"
                },
                "dataFormat": "JSON"
              }
            },
            "baseSelector": {
              "type": "JSON",
              "header": "data",
              "path": "data"
            },
            "selectors": [
              {
                "type": "JSON",
                "header": "ID",
                "path": "id"
              },
              {
                "type": "JSON",
                "header": "Name",
                "path": "attributes.title"
              },
              {
                "type": "JSON",
                "header": "Description",
                "path": "attributes.body.value"
              },
              {
                "type": "JSON",
                "header": "Address Line 1",
                "path": "attributes.field_place_address.address_line1"
              },
              {
                "type": "JSON",
                "header": "Address Line 2",
                "path": "attributes.field_place_address.address_line2"
              },
              {
                "type": "JSON",
                "header": "Sublocality",
                "path": "attributes.field_place_address.dependent_locality"
              },
              {
                "type": "JSON",
                "header": "Locality",
                "path": "attributes.field_place_address.locality"
              },
              {
                "type": "JSON",
                "header": "Administative Area",
                "path": "attributes.field_place_address.administrative_area"
              },
              {
                "type": "JSON",
                "header": "Country Code",
                "path": "attributes.field_place_address.country_code"
              },
              {
                "type": "JSON",
                "header": "Postal Code",
                "path": "attributes.field_place_address.postal_code"
              },
              {
                "type": "JSON",
                "header": "Language Code",
                "path": "attributes.langcode"
              },
              {
                "type": "JSON",
                "header": "Phone Number",
                "path": "attributes.field_place_telephone"
              },
              {
                "type": "JSON",
                "header": "Latitude",
                "path": "attributes.field_geofield.lat"
              },
              {
                "type": "JSON",
                "header": "Longitude",
                "path": "attributes.field_geofield.lon"
              },
              {
                "type": "JSON",
                "header": "Landing Page URL",
                "path": "attributes.drupal_internal__nid"
              }
            ]
          },
          "transforms": [
            {
              "function": {
                "inputHeaders": {
                  "headers": [
                    "Landing Page URL"
                  ]
                },
                "plugin": "drupalPlace_constructUrl",
                "function": "constructUrl"
              }
            }
          ],
          "mappings": [
            {
              "header": "Landing Page URL",
              "field": "landingPageUrl",
              "subfieldPath": [],
              "clearValueIfBlank": false
            },
            {
              "header": "Description",
              "field": "drupalPlace_drupalDescription_v2",
              "subfieldPath": [
                {
                  "name": "json"
                }
              ],
              "clearValueIfBlank": false
            },
            {
              "header": "Postal Code",
              "field": "address",
              "subfieldPath": [
                {
                  "name": "postalCode"
                }
              ],
              "clearValueIfBlank": false
            },
            {
              "header": "Locality",
              "field": "address",
              "subfieldPath": [
                {
                  "name": "city"
                }
              ],
              "clearValueIfBlank": false
            },
            {
              "header": "Administative Area",
              "field": "address",
              "subfieldPath": [
                {
                  "name": "region"
                }
              ],
              "clearValueIfBlank": false
            },
            {
              "header": "Latitude",
              "field": "displayCoordinate",
              "subfieldPath": [
                {
                  "name": "latitude"
                }
              ],
              "clearValueIfBlank": false
            },
            {
              "header": "Language Code",
              "field": "languages",
              "subfieldPath": [],
              "clearValueIfBlank": false
            },
            {
              "header": "Longitude",
              "field": "displayCoordinate",
              "subfieldPath": [
                {
                  "name": "longitude"
                }
              ],
              "clearValueIfBlank": false
            },
            {
              "header": "Name",
              "field": "name",
              "subfieldPath": [],
              "clearValueIfBlank": false
            },
            {
              "header": "Sublocality",
              "field": "address",
              "subfieldPath": [
                {
                  "name": "sublocality"
                }
              ],
              "clearValueIfBlank": false
            },
            {
              "header": "ID",
              "field": "entityId",
              "subfieldPath": [],
              "clearValueIfBlank": false
            },
            {
              "header": "Country Code",
              "field": "address",
              "subfieldPath": [
                {
                  "name": "countryCode"
                }
              ],
              "clearValueIfBlank": false
            },
            {
              "header": "Phone Number",
              "field": "mainPhone",
              "subfieldPath": [],
              "clearValueIfBlank": false
            },
            {
              "header": "Address Line 1",
              "field": "address",
              "subfieldPath": [
                {
                  "name": "line1"
                }
              ],
              "clearValueIfBlank": false
            },
            {
              "header": "Address Line 2",
              "field": "address",
              "subfieldPath": [
                {
                  "name": "line2"
                }
              ],
              "clearValueIfBlank": false
            }
          ],
          "scheduleConfig": {
            "customSchedule": {
              "timeZone": "America/New_York",
              "startDate": "2021-06-23",
              "startTime": "03:00",
              "frequencyType": "DAILY"
            },
            "runMode": "COMPREHENSIVE"
          },
          "comprehensiveModeConfig": {
            "comprehensiveSet": "ENTITIES_CREATED_BY_THIS_CONNECTOR",
            "actionOnMissingEntities": "DELETE"
          }
        },
        "path": "id"
      },
      {
        "type": "JSON",
        "header": "Name",
        "path": "attributes.title"
      },
      {
        "type": "JSON",
        "header": "Description",
        "path": "attributes.body.value"
      },
      {
        "type": "JSON",
        "header": "Address Line 1",
        "path": "attributes.field_place_address.address_line1"
      },
      {
        "type": "JSON",
        "header": "Address Line 2",
        "path": "attributes.field_place_address.address_line2"
      },
      {
        "type": "JSON",
        "header": "Sublocality",
        "path": "attributes.field_place_address.dependent_locality"
      },
      {
        "type": "JSON",
        "header": "Locality",
        "path": "attributes.field_place_address.locality"
      },
      {
        "type": "JSON",
        "header": "Administative Area",
        "path": "attributes.field_place_address.administrative_area"
      },
      {
        "type": "JSON",
        "header": "Country Code",
        "path": "attributes.field_place_address.country_code"
      },
      {
        "type": "JSON",
        "header": "Postal Code",
        "path": "attributes.field_place_address.postal_code"
      },
      {
        "type": "JSON",
        "header": "Language Code",
        "path": "attributes.langcode"
      },
      {
        "type": "JSON",
        "header": "Phone Number",
        "path": "attributes.field_place_telephone"
      },
      {
        "type": "JSON",
        "header": "Latitude",
        "path": "attributes.field_geofield.lat"
      },
      {
        "type": "JSON",
        "header": "Longitude",
        "path": "attributes.field_geofield.lon"
      },
      {
        "type": "JSON",
        "header": "Landing Page URL",
        "path": "attributes.drupal_internal__nid"
      }
    ]
  },
  "transforms": [
    {
      "function": {
        "inputHeaders": {
          "headers": [
            "Landing Page URL"
          ]
        },
        "plugin": "drupalPlace_constructUrl",
        "function": "constructUrl"
      }
    }
  ],
  "mappings": [
    {
      "field": "landingPageUrl",
      "header": "Landing Page URL",
      "subfieldPath": []
    },
    {
      "field": "drupalPlace_drupalDescription_v2",
      "header": "Description",
      "subfieldPath": []
    },
    {
      "field": "address",
      "header": "Postal Code",
      "subfieldPath": [
        {
          "name": "postalCode"
        }
      ]
    },
    {
      "field": "address",
      "header": "Locality",
      "subfieldPath": [
        {
          "name": "city"
        }
      ]
    },
    {
      "field": "address",
      "header": "Administative Area",
      "subfieldPath": [
        {
          "name": "region"
        }
      ]
    },
    {
      "field": "displayCoordinate",
      "header": "Latitude",
      "subfieldPath": [
        {
          "name": "latitude"
        }
      ]
    },
    {
      "field": "displayCoordinate",
      "header": "Longitude",
      "subfieldPath": [
        {
          "name": "longitude"
        }
      ]
    },
    {
      "field": "name",
      "header": "Name",
      "subfieldPath": []
    },
    {
      "field": "address",
      "header": "Sublocality",
      "subfieldPath": [
        {
          "name": "sublocality"
        }
      ]
    },
    {
      "field": "entityId",
      "header": "ID",
      "subfieldPath": []
    },
    {
      "field": "address",
      "header": "Country Code",
      "subfieldPath": [
        {
          "name": "countryCode"
        }
      ]
    },
    {
      "field": "mainPhone",
      "header": "Phone Number",
      "subfieldPath": []
    },
    {
      "field": "address",
      "header": "Address Line 1",
      "subfieldPath": [
        {
          "name": "line1"
        }
      ]
    },
    {
      "field": "address",
      "header": "Address Line 2",
      "subfieldPath": [
        {
          "name": "line2"
        }
      ]
    }
  ],
  "scheduleConfig": {
    "customSchedule": {
      "timeZone": "America/New_York",
      "startDate": "2021-06-23",
      "startTime": "03:00",
      "frequencyType": "DAILY"
    },
    "runMode": "COMPREHENSIVE"
  },
    "comprehensiveModeConfig": {
        "comprehensiveSet": "ENTITIES_CREATED_BY_THIS_CONNECTOR",
        "actionOnMissingEntities": "DELETE"
    }
}
